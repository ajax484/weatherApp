(this["webpackJsonpreact-lap"]=this["webpackJsonpreact-lap"]||[]).push([[0],{23:function(e,t,a){e.exports=a(48)},28:function(e,t,a){},47:function(e,t,a){},48:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(20),i=a.n(c),o=(a(28),a(8)),s=a(21),u=a(3),h=a(4),l=a(2),m=a(6),y=a(5),p=a(22),d=a.n(p),f=function(e){Object(m.a)(a,e);var t=Object(y.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){var e=this.props.temperatureList;return r.a.createElement("div",{className:"temperature-list"},e.map((function(e){return r.a.createElement("div",{className:"day-item",key:e.day},r.a.createElement("h4",{className:"day"},e.day),r.a.createElement("img",{src:"".concat("http://openweathermap.org/img/wn/").concat(e.weatherIcon).concat("@2x.png"),alt:"".concat(e.weatherDescription)}),r.a.createElement("h2",{className:"temp"},e.temperature,"\xb0"))})))}}]),a}(n.Component),v=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],b=["January","February","March","April","May","June","July","August","September","October","November","December"],O=function(e){return v[e.getDay()]},S=function(e){return"".concat(O(e),", ").concat(e.getDate()," ").concat(function(e){return b[e.getMonth()]}(e)," ").concat(e.getFullYear())},g=function(e){return new Date((new Date).getTime()+1e3*(60*(new Date).getTimezoneOffset()+parseInt(e)))},j=function(e){Object(m.a)(a,e);var t=Object(y.a)(a);function a(e){var n;Object(u.a)(this,a),n=t.call(this,e);var r=e.timezone;return n.state={date:g(r),time:g(r),timezone:r},n.timeTick=n.timeTick.bind(Object(l.a)(n)),n}return Object(h.a)(a,[{key:"timeTick",value:function(){var e=this;this.timerID=setInterval((function(){return e.tick()}),1e3)}},{key:"tick",value:function(){var e=this.state.timezone;this.setState({date:g(e),time:g(e)})}},{key:"render",value:function(){var e=this.state,t=e.date,a=e.time;return r.a.createElement("div",{className:"date-time"},r.a.createElement("h1",{className:"time"},a.toLocaleTimeString("en-US",{hour:"numeric",minute:"numeric"})),r.a.createElement("br",null),r.a.createElement("h3",{className:"date"},S(t)))}},{key:"componentDidMount",value:function(){this.timeTick()}},{key:"componentWillUnmount",value:function(){clearInterval(this.timerID)}},{key:"componentDidUpdate",value:function(e){this.props.timezone!==e.timezone&&this.setState({timezone:this.props.timezone})}}]),a}(n.Component),k=function(e){Object(m.a)(a,e);var t=Object(y.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){var e,t=this.props,a=t.city,n=t.country;return r.a.createElement("div",{className:"area"},r.a.createElement("h1",{className:"city"},a),r.a.createElement("br",null),r.a.createElement("h3",{className:"country"},(e=n,new Intl.DisplayNames(["en"],{type:"region"}).of(e))))}}]),a}(n.Component),w=function(e){Object(m.a)(a,e);var t=Object(y.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){var e=this.props,t=e.value,a=e.onChange,n=e.onSubmit;return r.a.createElement("form",{onSubmit:n,className:"weather-form"},r.a.createElement("input",{type:"text",value:t,onChange:a}),r.a.createElement("button",{type:"submit"},"Search"))}}]),a}(n.Component),E=(a(47),"https://api.openweathermap.org/data/2.5/forecast"),C="c0c4a4b4047b97ebc5948ac9c48c0559",W=function(e){Object(m.a)(a,e);var t=Object(y.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={weather:null,searchCity:"lagos",currentCity:null,error:!1,isFetched:!1},n.needsToFetchWeather=n.needsToFetchWeather.bind(Object(l.a)(n)),n.setSearchWeather=n.setSearchWeather.bind(Object(l.a)(n)),n.fetchPreviousWeather=n.fetchPreviousWeather.bind(Object(l.a)(n)),n.fetchWeather=n.fetchWeather.bind(Object(l.a)(n)),n.onSearchChange=n.onSearchChange.bind(Object(l.a)(n)),n.onSearchSubmit=n.onSearchSubmit.bind(Object(l.a)(n)),n}return Object(h.a)(a,[{key:"needsToFetchWeather",value:function(e){return console.log(this.state.weather[e]),!this.state.weather[e]}},{key:"setSearchWeather",value:function(e,t){var a=e.city,n=e.list,r=a.name,c=a.country,i=a.timezone,u=this.state.weather,h=[];n.forEach((function(e){var t,a=e.dt,n=e.temp,r=e.weather;h.push({day:(t=a,O(new Date(1e3*t))),temperature:n.day,weatherDescription:r[0].weatherDescription,weatherIcon:r[0].icon})}));var l={city:r,country:c,timezone:i,temperatureList:h},m=Object(s.a)(Object(o.a)({},t,l),u);this.setState({isFetched:!0,searchCity:t,currentCity:l,weather:m}),console.log("api call:",this.state.currentCity)}},{key:"fetchPreviousWeather",value:function(e){var t=this.state.weather;t[e]&&this.setState({currentCity:t[e]}),console.log("cache log:",this.state.currentCity)}},{key:"fetchWeather",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,n="".concat(E).concat("/daily?").concat("q=").concat(e,"&").concat("cnt=").concat(a,"&").concat("units=metric","&").concat("appid=").concat(C);d()(n).then((function(a){t.setSearchWeather(a.data,e)})).catch((function(e){alert("no weather data found for this city"),t.setState({error:e})}))}},{key:"onSearchChange",value:function(e){this.setState({searchCity:e.target.value})}},{key:"onSearchSubmit",value:function(e){var t=this.state.searchCity;this.needsToFetchWeather(t)?this.fetchWeather(t):this.fetchPreviousWeather(t),e.preventDefault()}},{key:"render",value:function(){var e=this.state,t=e.currentCity,a=e.isFetched,n=e.searchCity,c=a&&t||{},i=c.city,o=c.country,s=c.timezone,u=c.temperatureList;return r.a.createElement("div",{className:"weather"},a?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"weather-top"},r.a.createElement(j,{timezone:s}),r.a.createElement(w,{value:n,onChange:this.onSearchChange,onSubmit:this.onSearchSubmit}),r.a.createElement(k,{country:o,city:i})),r.a.createElement(f,{temperatureList:u})):null)}},{key:"componentDidMount",value:function(){var e=this.state.searchCity;this.fetchWeather(e)}}]),a}(n.Component);i.a.render(r.a.createElement(W,null),document.getElementById("root"))}},[[23,1,2]]]);
//# sourceMappingURL=main.4c2d8cdf.chunk.js.map